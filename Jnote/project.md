### 工程结构
父工程：确定所有依赖的版本、模块聚合
base基础工程：基础的代码
所有微服务依赖base

### 重要注解

**@PathVarible**
- @Autowried
- @Resource


- 20230704因为swagger网址打错、忘记对Controller类加注解有错误。

写代码顺序：持久层 -》 service

启动测试 -》 @SpringBootApplication注解会自动把启动类所在包、子包所有bean注入spring容器。 ->在单元测试类中@Autowired 注入要测试的Mapper

==在测试类把sql语句复制到连接工具中调整、测试==

- 状态eg上架、下架  --》定义一张数据字典表
- **数据字典表**（系统管理模块）
- 查询接口：注意！Service实现类要加注解@Service

### httpClient

### 跨域
- 浏览器的安全策略--同源策略：
- 解决方案：
- 一、跨域资源的url放在src下
```js
<script src="http://跨域地址?callback=fun">
```
- nginx
- 添加响应头（最简单）

编码经验：
如果需要得到一个bean，可以从后往前推

- 前端的 .env文件 修改得话需要重启
- 分类：树形！树形级别不固定时，可递归实现。Mysql,java程序连接一次mysql,可以执行多个sql语句。递归sql语句连接一次数据库
- MYSQL递归实现

- RuntimeException
- JSR303校验框架
- 一、
在dto给属性添加注解
在controller给参数加上@Validated注解开启校验
- 二
分组校验

#### nacos
- namespace:区分环境 eg 开发环境、 测试环境
- group: 通常用来区分项目
- nacos配置中心作用：一个服务，多个实例的情况，配置文件分散、很多。使用配置中心就不用一个一个修改。配置：每个服务特有的配置、共用的配置
- 配置文件优先级

### Spring Security
- 基于过滤器
- OAuth2协议
- jwt令牌：对称加密、非对称加密

**用户认证**：扩展用户信息
- 统一入口：
- 建立模型类存认证可能请求的数据，统一认证请求的数据
- 策略模式
- 同一个接口，多个实现类 @Service("name")
- 验证码：防止恶性攻击

**异常工厂**

**网关认证**：校验令牌的正确性、维护网址白名单。微服务完成授权。

**微服务授权**
- RBAC:
- 基于角色的访问控制--扩展性弱
- 基于资源的访问控制：扩展性更好

**@PreAuthorize注解**

### oauth2.0
开发授权的标准，用户授权第三方应用访问存储在另外服务提供者上的信息。
- 两个服务：
授权服务：
资源服务：

授权服务和资源服务分开部署

